https://github.com/GoogleCloudPlatform/click-to-deploy-solutions/tree/main/data-analytics-platform-event-driven
https://github.com/Viktor-Soltesz/salary-survey-iac.git
https://github.com/dataslayermedia/Google-Cloud-Platform-Killswitch/tree/main

gcloud projects list
gcloud auth login
gcloud config set project developer-salaries-dev
gcloud projects get-iam-policy software-developer-salaries > iam-backup.yaml
gcloud services enable compute.googleapis.com


terraform plan -var="project_id=software-developer-salaries"
terraform init -reconfigure -backend-config="bucket=software-developer-salaries-tf-state" -backend-config="prefix=data-analytics-platform-event-driven"

git init
git remote add origin https://github.com/Viktor-Soltesz/salary-survey-iac.git
git add .
git commit -m "Initial commit - Infrastructure as Code"
git branch -M main
git push -u origin main

git checkout -b dev
git push -u origin dev


git add .
git commit -m "updated requirements.txt"
git push -u origin dev3

ON INTERRUPTION:
- state file can be left behind, check this by:
	gsutil ls gs://developer-salaries-dev-tf-state/data-analytics-platform-event-driven/default.tflock
- And remove lock if no processes are running:
	gsutil rm gs://developer-salaries-dev-tf-state/data-analytics-platform-event-driven/default.tflock


europe-west9
E:\_Programming\_DataAnalysis\salary_survey_iac
E:\_Programming\_DataAnalysis\salary_survey_iac\infra

DEV:
Secrets:
- GOOGLE_CREDENTIALS
- PROJECT_ID
- TERRAFORM_SERVICE_ACCOUNT_EMAIL

Minimal required roles:
roles/serviceusage.serviceUsageAdmin (to enable APIs)
roles/storage.admin (to manage GCS buckets)
roles/resourcemanager.projectIamAdmin (to modify IAM policies)

Final Workflow:

Setting up VSCode:
- Open System Environment Variables:
	Press Win + R, type sysdm.cpl, and hit Enter.
	Go to the Advanced tab → Click Environment Variables.
	Find System Variables → Scroll to Path → Click Edit.
	Click New and add:
	- C:\Program Files\Git\bin
	- C:\Program Files (x86)\Google\Cloud SDK\google-cloud-sdk\bin
	- C:\Program Files\

start VScode as admin!

gcloud auth login
gcloud config set project developer-salaries-dev

0. Create a project in Google Cloud
enable billing

1. Run prereq.sh locally:
- Provide a project ID (e.g., software-developer-salaries).
- Requires prior gcloud auth (e.g., gcloud auth login).
- Creates bucket, enables APIs, sets up Terraform SA.

Run in Git Bash with:
chmod +x prereq.sh
./prereq.sh

Or in Powershell with:
bash prereq.sh

2. Manual Key Generation:
- In GCP Console, generate a key for terraform-sa@... and store it in GitHub Secrets as GOOGLE_CREDENTIALS.


3. Push to GitHub:
- Your GitHub Actions workflow runs on push to main, deploying everything with Terraform.
